{
  "hash": "b51e8d2487f8bfb718529a4bedbfa220",
  "result": {
    "markdown": "---\ntitle: Visualizing Likert data II\nsubtitle: Lecture 16\ntitle-slide-attributes:\n  data-background-image: ../vizdata-bg.png\n  data-background-size: stretch\n  data-slide-number: none\nformat: revealjs\nhighlight-style: a11y\nexecute:\n  code-link: true\n  warning: true\neditor_options: \n  chunk_output_type: console\n---\n\n\n# Warm up\n\n## Announcements\n\n-   Teams emailed at the end of class\n-   HW 4 will be posted before Monday\n\n## Setup {.smaller}\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load packages\nlibrary(countdown)\nlibrary(tidyverse)\nlibrary(colorspace)\nlibrary(waffle)\n\n# set theme for ggplot2\nggplot2::theme_set(ggplot2::theme_minimal(base_size = 14))\n\n# set width of code output\noptions(width = 65)\n\n# set figure parameters for knitr\nknitr::opts_chunk$set(\n  fig.width = 7,        # 7\" width\n  fig.asp = 0.618,      # the golden ratio\n  fig.retina = 3,       # dpi multiplier for displaying HTML output on retina\n  fig.align = \"center\", # center align figures\n  dpi = 300             # higher dpi, sharper image\n)\n```\n:::\n\n\n# Durham City and County Resident Survey\n\n## Data\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndurham <- read_csv(here::here(\"slides/16\", \"data/durham-2020.csv\"))\nglimpse(durham)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 848\nColumns: 49\n$ id                                      <dbl> 1, 2, 3, 4, 5, …\n$ overall_quality_of_services_3_01        <dbl> 3, 4, 4, 4, 4, …\n$ overall_quality_of_services_3_02        <dbl> 3, 4, 4, 4, 4, …\n$ overall_appearance_of_durham_3_03       <dbl> 2, 4, 4, 4, 4, …\n$ overall_management_of_develo_3_04       <dbl> 2, 2, 4, 4, 3, …\n$ overall_image_of_durham_3_05            <dbl> 2, 4, 4, 4, 2, …\n$ overall_quality_of_life_in_d_3_06       <dbl> 2, 4, 4, 3, 4, …\n$ overall_quality_of_life_in_y_3_07       <dbl> 5, 5, 4, 4, 5, …\n$ overall_value_you_receive_fo_3_08       <dbl> 3, 5, 4, 4, 3, …\n$ do_your_monthly_housing_cost_12_01      <dbl> 2, 2, 2, NA, 2,…\n$ are_you_able_to_find_housing_12_02      <dbl> 1, NA, 1, 1, 1,…\n$ do_you_have_major_home_repai_12_03      <dbl> 2, 1, 2, 2, 2, …\n$ ease_of_travel_by_walking_18_01         <dbl> NA, 4, 2, 4, 4,…\n$ ease_of_travel_by_biking_18_02          <dbl> NA, 3, 2, 3, 4,…\n$ ease_of_travel_by_bus_godu_18_03        <dbl> NA, 3, 2, 3, NA…\n$ quality_of_downtown_parking_18_04       <dbl> 2, 3, 3, 3, 3, …\n$ the_ability_in_your_neighbo_18_05       <dbl> 4, 5, 4, 4, 4, …\n$ as_a_place_to_live_24_01                <dbl> 3, 5, 4, 4, 4, …\n$ as_a_place_to_work_24_02                <dbl> 4, 4, NA, 4, NA…\n$ as_a_place_to_play_24_03                <dbl> 3, 4, NA, 4, 3,…\n$ as_a_place_to_raise_childre_24_04       <dbl> 2, 4, NA, NA, 2…\n$ as_a_place_to_educate_child_24_05       <dbl> 2, 4, NA, NA, 1…\n$ as_a_place_to_retire_24_06              <dbl> 2, 4, 4, 4, 4, …\n$ as_a_place_to_visit_24_07               <dbl> 3, 4, 3, 3, 5, …\n$ as_a_place_to_start_a_busin_24_08       <dbl> 3, 4, NA, 3, NA…\n$ as_a_community_that_is_movi_24_09       <dbl> 1, 5, 4, 4, 3, …\n$ have_you_or_someone_in_your_househol_26 <dbl> 2, 2, 2, 2, 2, …\n$ approximately_how_many_years_have_yo_28 <dbl> 29, 34, 15, 11,…\n$ what_is_your_age_29                     <dbl> 1, 3, 2, 1, 1, …\n$ what_is_your_gender_30                  <dbl> 1, 2, 1, 2, 1, …\n$ do_you_own_or_rent_your_current_resi_31 <dbl> 1, 2, 1, 1, 1, …\n$ asianpacific_islander_32_01             <dbl> NA, NA, NA, NA,…\n$ white_32_02                             <dbl> NA, 2, 2, 2, NA…\n$ native_americaninuit_32_03              <dbl> NA, NA, NA, NA,…\n$ blackafrican_american_32_04             <dbl> 4, NA, NA, NA, …\n$ other_32_05                             <dbl> NA, NA, NA, NA,…\n$ please_define_other_32_5                <chr> NA, NA, NA, NA,…\n$ are_you_of_hispanic_latino_or_spa_33    <dbl> 2, 2, 1, 2, 2, …\n$ primary_language                        <chr> \"English\", \"Eng…\n$ please_define_other_34_3                <chr> NA, NA, NA, NA,…\n$ how_might_we_better_provide_service_34a <chr> NA, NA, NA, NA,…\n$ would_you_say_your_total_annual_hous_35 <dbl> 1, 2, NA, NA, 3…\n$ city                                    <chr> \"Durham\", \"Durh…\n$ state                                   <chr> \"NC\", \"NC\", \"NC…\n$ zip                                     <dbl> 27712, 27705, 2…\n$ pac_zone                                <dbl> NA, 2, NA, 4, 4…\n$ inside_city_of_durham                   <chr> \"N\", \"Y\", \"N\", …\n$ block_lon                               <dbl> -78877000, -789…\n$ block_lat                               <dbl> 36087000, 36022…\n```\n:::\n:::\n\n\n## Quality\n\n![](images/quality.png){fig-align=\"center\" width=\"800\"}\n\n## Quality {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndurham |>\n  select(contains(\"_3_\")) |>\n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 848\nColumns: 8\n$ overall_quality_of_services_3_01  <dbl> 3, 4, 4, 4, 4, 3, 5, …\n$ overall_quality_of_services_3_02  <dbl> 3, 4, 4, 4, 4, 4, 4, …\n$ overall_appearance_of_durham_3_03 <dbl> 2, 4, 4, 4, 4, 4, 4, …\n$ overall_management_of_develo_3_04 <dbl> 2, 2, 4, 4, 3, 2, 3, …\n$ overall_image_of_durham_3_05      <dbl> 2, 4, 4, 4, 2, 1, 4, …\n$ overall_quality_of_life_in_d_3_06 <dbl> 2, 4, 4, 3, 4, 4, 4, …\n$ overall_quality_of_life_in_y_3_07 <dbl> 5, 5, 4, 4, 5, 4, 3, …\n$ overall_value_you_receive_fo_3_08 <dbl> 3, 5, 4, 4, 3, 3, 4, …\n```\n:::\n:::\n\n\n## Transportation\n\n![](images/transportation.png){fig-align=\"center\" width=\"799\"}\n\n## Transportation {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndurham |>\n  select(contains(\"_18_\")) |>\n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 848\nColumns: 5\n$ ease_of_travel_by_walking_18_01   <dbl> NA, 4, 2, 4, 4, 3, 2,…\n$ ease_of_travel_by_biking_18_02    <dbl> NA, 3, 2, 3, 4, 2, 3,…\n$ ease_of_travel_by_bus_godu_18_03  <dbl> NA, 3, 2, 3, NA, 3, N…\n$ quality_of_downtown_parking_18_04 <dbl> 2, 3, 3, 3, 3, 3, 4, …\n$ the_ability_in_your_neighbo_18_05 <dbl> 4, 5, 4, 4, 4, 4, 2, …\n```\n:::\n:::\n\n\n## Ratings\n\n![](images/ratings.png){fig-align=\"center\" width=\"799\"}\n\n## Ratings {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndurham |>\n  select(contains(\"_24_\")) |>\n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 848\nColumns: 9\n$ as_a_place_to_live_24_01          <dbl> 3, 5, 4, 4, 4, 4, 4, …\n$ as_a_place_to_work_24_02          <dbl> 4, 4, NA, 4, NA, 5, N…\n$ as_a_place_to_play_24_03          <dbl> 3, 4, NA, 4, 3, 3, NA…\n$ as_a_place_to_raise_childre_24_04 <dbl> 2, 4, NA, NA, 2, 4, N…\n$ as_a_place_to_educate_child_24_05 <dbl> 2, 4, NA, NA, 1, 4, N…\n$ as_a_place_to_retire_24_06        <dbl> 2, 4, 4, 4, 4, 4, NA,…\n$ as_a_place_to_visit_24_07         <dbl> 3, 4, 3, 3, 5, 4, 4, …\n$ as_a_place_to_start_a_busin_24_08 <dbl> 3, 4, NA, 3, NA, NA, …\n$ as_a_community_that_is_movi_24_09 <dbl> 1, 5, 4, 4, 3, 3, 4, …\n```\n:::\n:::\n\n\n## Housing\n\n![](images/housing.png){fig-align=\"center\" width=\"800\"}\n\n## Housing {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndurham |>\n  select(contains(\"_12_\")) |>\n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 848\nColumns: 3\n$ do_your_monthly_housing_cost_12_01 <dbl> 2, 2, 2, NA, 2, 2, 2…\n$ are_you_able_to_find_housing_12_02 <dbl> 1, NA, 1, 1, 1, 1, 1…\n$ do_you_have_major_home_repai_12_03 <dbl> 2, 1, 2, 2, 2, 2, 2,…\n```\n:::\n:::\n\n\n## Demographics\n\n![](images/demographics.png){fig-align=\"center\" width=\"800\"}\n\n## Demographics {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndurham |>\n  select(\n    !contains(\"_3_\") & !contains(\"_12_\") & \n    !contains(\"_18_\") & !contains(\"_24_\")) |>\n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 848\nColumns: 24\n$ id                                      <dbl> 1, 2, 3, 4, 5, …\n$ have_you_or_someone_in_your_househol_26 <dbl> 2, 2, 2, 2, 2, …\n$ approximately_how_many_years_have_yo_28 <dbl> 29, 34, 15, 11,…\n$ what_is_your_age_29                     <dbl> 1, 3, 2, 1, 1, …\n$ what_is_your_gender_30                  <dbl> 1, 2, 1, 2, 1, …\n$ do_you_own_or_rent_your_current_resi_31 <dbl> 1, 2, 1, 1, 1, …\n$ asianpacific_islander_32_01             <dbl> NA, NA, NA, NA,…\n$ white_32_02                             <dbl> NA, 2, 2, 2, NA…\n$ native_americaninuit_32_03              <dbl> NA, NA, NA, NA,…\n$ blackafrican_american_32_04             <dbl> 4, NA, NA, NA, …\n$ other_32_05                             <dbl> NA, NA, NA, NA,…\n$ please_define_other_32_5                <chr> NA, NA, NA, NA,…\n$ are_you_of_hispanic_latino_or_spa_33    <dbl> 2, 2, 1, 2, 2, …\n$ primary_language                        <chr> \"English\", \"Eng…\n$ please_define_other_34_3                <chr> NA, NA, NA, NA,…\n$ how_might_we_better_provide_service_34a <chr> NA, NA, NA, NA,…\n$ would_you_say_your_total_annual_hous_35 <dbl> 1, 2, NA, NA, 3…\n$ city                                    <chr> \"Durham\", \"Durh…\n$ state                                   <chr> \"NC\", \"NC\", \"NC…\n$ zip                                     <dbl> 27712, 27705, 2…\n$ pac_zone                                <dbl> NA, 2, NA, 4, 4…\n$ inside_city_of_durham                   <chr> \"N\", \"Y\", \"N\", …\n$ block_lon                               <dbl> -78877000, -789…\n$ block_lat                               <dbl> 36087000, 36022…\n```\n:::\n:::\n\n\n# Visualizing categorical data\n\n## Language\n\n::: {.callout-note appearance=\"minimal\" icon=\"false\"}\nWhat is the primary language used in your household?\n:::\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndurham |> distinct(primary_language)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 1\n  primary_language\n  <chr>           \n1 English         \n2 Spanish         \n3 <NA>            \n4 Other           \n```\n:::\n:::\n\n\n. . .\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndurham <- durham |>\n  mutate(\n    primary_language = fct_relevel(primary_language, \"English\", \"Spanish\", \"Other\")\n  )\n```\n:::\n\n\n## Bar chart {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndurham |>\n  filter(!is.na(primary_language)) |>\n  ggplot(aes(x = primary_language)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](16-likert-2_files/figure-revealjs/unnamed-chunk-10-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n## Pie chart\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](16-likert-2_files/figure-revealjs/unnamed-chunk-11-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n## Waffle chart\n\nUsing [waffle](https://github.com/hrbrmstr/waffle)\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](16-likert-2_files/figure-revealjs/unnamed-chunk-12-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n## Proportional waffle chart\n\nWaffles work best when they are square -- makes it easier to compare parts to whole which is the purpose of the chart\n\n::: task\nBut what happened to \"Other\"?\n:::\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](16-likert-2_files/figure-revealjs/unnamed-chunk-13-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n## Proportional waffle chart, take 2\n\nWith a bit of fudging...\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](16-likert-2_files/figure-revealjs/unnamed-chunk-14-1.png){fig-align='center' width=1200}\n:::\n:::\n\n\n## Let's actually make these figures!\n\nGo to `ae-14`.\n\n# Visualizing Likert data\n\n## Quality {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndurham |>\n  select(contains(\"_3_\")) |>\n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 848\nColumns: 8\n$ overall_quality_of_services_3_01  <dbl> 3, 4, 4, 4, 4, 3, 5, …\n$ overall_quality_of_services_3_02  <dbl> 3, 4, 4, 4, 4, 4, 4, …\n$ overall_appearance_of_durham_3_03 <dbl> 2, 4, 4, 4, 4, 4, 4, …\n$ overall_management_of_develo_3_04 <dbl> 2, 2, 4, 4, 3, 2, 3, …\n$ overall_image_of_durham_3_05      <dbl> 2, 4, 4, 4, 2, 1, 4, …\n$ overall_quality_of_life_in_d_3_06 <dbl> 2, 4, 4, 3, 4, 4, 4, …\n$ overall_quality_of_life_in_y_3_07 <dbl> 5, 5, 4, 4, 5, 4, 3, …\n$ overall_value_you_receive_fo_3_08 <dbl> 3, 5, 4, 4, 3, 3, 4, …\n```\n:::\n:::\n\n\n## Services visualized\n\nA very rough starting point:\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](16-likert-2_files/figure-revealjs/unnamed-chunk-16-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n## Let's improve!\n\nGo back to `ae-14`.\n",
    "supporting": [
      "16-likert-2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}